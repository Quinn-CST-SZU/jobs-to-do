# 数据应用篇
> 本篇介绍数据应用相关的内容
>

## 一.简介

- 元数据管理<->数据可用性、数据安全
- 数据治理<->数据质量、数据安全

## 二.元数据篇

```
｜- 元数据
  ｜- 业务元数据
     ｜- 主题和概念领域
     ｜- 实体及属性的业务名称和业务定义
     ｜- 属性的数据类型和其它特征，范围描述，计算公式
     ｜- 算法和业务规则
  ｜- 技术和操作元数据
     ｜- 物理数据库表名和字段名、字段属性
     ｜- 其它数据库对象的属性
     ｜- 数据存储特性
  ｜- 流程元数据
     ｜- 定义和描述系统的其它原属（流程、业务规划、程序、任务、工具等）的特性的数据
  ｜- 数据管理制度元数据
     ｜- 关于数据管理专员、监管制度流程和责任分配的数据
```

### 2.1 业务元数据

业务元数据在日常使用中主要涉及到四部分：
- 数据资产目录：企业资产地图
- 数据标准：定义公司层面的属性层数据含义及业务规则
- 数据模型：反应业务信息（对象）之间的关联关系
- 数据分布：定义数据产生的源头及各个流程和IT系统之间的流动情况

#### 2.1.1 数据资产目录

数据资产目录能更清晰了解到公司当前资产有哪些，每一类资产涉及业务有哪些。
数据资产目录通常分为5层：

- L1.主题域组：描述公司数据管理的最高层级分类，通常两种分类方式，一类为根据数据自身特征边界进行分类，另一类基于业务管理边界进行分类
- L2.主题域：互不重叠的高层面数据分类，管辖一组密切相关的业务对象
- L3.业务对象：定义业务领域重要的人、事、物，承载了业务运作和管理涉及的重要信息
- L4.逻辑实体：描述一个业务对象在某方面特征的一组属性集合
- L5.属性：客观描述业务对象在某方面的特质和特性

数据资产目录并不是凭个人意愿随意制定的，为保证数据资产目录的正确性，L3及以上层级是需要由相关组织进行评审通过并发布的，L4及以下层级可以由所在部门或小组评审通过（一般会与数据模型一起进行评审）

#### 2.1.2 数据标准

数据标准是描述公司层面需共同遵守的属性层数据的含义和业务规则，相关标准需经过相关组织评审通过发布，并在指定范围内严格遵守。数据标准制定的前提是遵循国家相关制度规定下展开的，如金融行业必须在《中国银保监银行业金融机构监管数据标准化规范（2021版）》等政策规定下进行相应展开实施，所以数据标准在不同的领域会存在部分差异，这部分需要具体场景具体分析。

```
｜- 数据标准
  ｜- 资产目录
  ｜- 总产目录个层级业务含义
  ｜- 数据分类
  ｜- 数据owner
  ｜- 数据源
  ｜- 属性类型
  ｜- 信息安全&隐私登记
```

- 资产目录各层级业务含义：为了让非相关业务人员查询时更好的理解该模块的使用场景及业务规则
- 数据分类：这里的分类并不是业务数据、技术数据的分类，是根据数据的实际特性进行分类，可以参考下图。不同的数据分类会有不同的处理方式，如主数据在很多制造公司就有严格的要求
- 数据Owner：这里指的是相关数据责任人，即在数据共享或数据使用的相关审批人，这部分一般是业务负责人
- 数据源：这里是为了区分引用还是源头，目的是解决下游数据使用时的源头数据一致性保障
- 属性类型：这里非技术元数据里的整形、浮点，而是文本、数字等（实际可以利用技术元数据转换出来得到）
- 信息安全&隐私等级：需在合规制度下进行分类分级管控，这里评级by字段定义，并且需要经过评审，同时在后续需部署监控，对于不同逻辑实体下相同属性的等级不同进行识别

```
|- 元数据
  ｜- 外部数据/内部数据
  ｜- 结构化数据
    ｜- 报告数据
    ｜- 事务数据
    ｜- 主数据
    ｜- 基础数据
    ｜- 观测数据
    ｜- 规则数据
  ｜- 非结构化数据
    ｜- 文档
    ｜- 图片
    ｜- 视频
```

在梳理数据标准前，建议先对于部分公共字段（如创建人，创建时间，更新人，更新时间、商户、服务商等）进行统一定义（包含数据定义，数据类型等），数据标准直接引用该部分即可，这样保证公共字段的全局统一性。

#### 2.1.3 数据模型

数据模型时从数据视角对现实世界特征的模拟和抽象，根据业务需求抽取信息的主要特征，反映业务信息（对象）之间的关联关系。谈到数据模型，先了解下三类模型——概念模型、逻辑模型和物理模型：

- 概念模型：基于对用户需求的了解，经过分析总结，提炼出来用于描述用户业务需求的一些概念的东西，如销售人员与客户就购买某商品，最后签订了订单
- 逻辑模型：将概念模型转化为具体的数据模型的过程，如客户信息要包含名称、电话等，商品信息要包括名称、规格等，订单要包括日期、时间等，以及各信息之间的关联
- 物理模型：将逻辑模型在具体的物理介质上的实现，如表的建立、字段的定义、枚举值的定义等


#### 2.1.4 数据分布（血缘关系）

数据分布主要讲述的是数据源、信息链以及数据流，有点类似xwatt的时序图。数据源在数据标准部分已经阐述，信息链和数据流其实更多的描述的是各业务系统间的数据流转，这部分跟数据模型结合的更紧密。

### 2.2 技术元数据

技术元数据相信大家并不陌生，主要包含数据源和目标系统信息，物理数据库名、物理表名、字段名、字段属性，任务调度信息，数据迁移信息，数据库访问信息等。

### 2.3 应用

```
｜- 元数据管理应用场景
  ｜- 应用
    ｜- 数据资产地图
    ｜- 数据共享
    ｜- 权限管理
    ｜- 资源管理
    ｜- 自动化入湖
    ｜- 血缘分析
    ｜- 数据安全管理
    ｜- 数据变更监控
  ｜- 元数据
    ｜- 技术元数据
      ｜- 物理表
      ｜- 调度信息
      ｜- 账号信息
      ｜- 物理字段
      ｜- 日志信息
      ｜- 转换规则
      ｜- 存储空间
      ｜- 配置信息
    ｜- 业务元数据
      ｜- 资产目录
      ｜- 数据标准
      ｜- 数据模型
      ｜- 数据分布
    ｜- 流程规范制度
      ｜- 表命名规范
      ｜- 数据owner
  ｜- 数据源
    ｜- 采集
      ｜- 关系型数据库
      ｜- 非关系型数据库
      ｜- 非结构化数据
    ｜- 梳理
      ｜- 接口服务
      ｜- 业务流程规范
      ｜- 数据管理规范
```

#### 2.3.1 数据资产地图与资源管理

```
｜- 数据资产地图
  ｜- 找数据
    ｜- 产品视角
      ｜- 产品->系统->库->表（技术元数据）
    ｜- 业务视角
      ｜- 数据资产目录（业务元数据）
    ｜- 安全视角
      ｜- 数据标准（业务元数据）
  ｜- 管数据
    ｜- 资源视角
      ｜- 存储空间
      ｜- 业务模块
      ｜- 数据安全等级
      ｜- 使用热度
    ｜- 规范视角
      ｜- 设计规范
      ｜- 一致性校验
```

#### 2.3.2 自动化入湖

自动化入湖，其实就是对于新增表/字段的入库进行前置，解决数据分析侧需要使用数据时，数据还未入湖带来的时间后移。

```
｜- 自动化入湖
  ｜- step01.技术元数据信息采集（库、表配置相关信息）
  ｜- step02.判断是否入湖（基于表是否新增、是否存在新增字段）
  ｜- step03.判断入库方式（全量or增量：基于表数据量）
  ｜- step04.自动化入湖实施（数据拉取和上线发布）
```

#### 2.3.3 数据共享

数据共享基于数据资产地图的基础上，可以直接触发申请（与权限系统打通），并经过相应的owner审批（建议增加业务owner，因为权限系统大部分审批人是系统开发部门主管而非实际数据owner），保留相关数据使用记录

#### 2.3.4 血缘分析与变更监控

结合执行计划
血缘分析可以通过技术元数据和业务元数据，获取到表层级的血缘依赖，字段层级的血缘目前还是比较精确获取，尤其有复杂逻辑加工的字段，但我们可以通过脚本、模型等解析以及相关算法分析得到相对准确的字段血缘。有了准确的血缘，我们就可以在关键业务计算流程中实施更好的保障，按照业务优先级设定相关参数，同时也能够根据血缘，溯源相关字段安全等级，从而达到全局字段安全等级的一致，做好相关安全加密，更好的保证数据安全

流程标准化
下游数据使用过程中，常出现由于上游版本迭代和数据生命周期等使得下游任务存在风险。为降低风险，需要对变更场景进行管控，做好风险前置识别：测试发布流程线上化，避免手动执行语句等操作，上游变更涉及数据表相关等变更时，在测试验证或发布验证时，对脚本进行扫描识别，结合权限系统，提前识别变更带来的下游风险用户，做好相关周知

#### 2.3.5 权限管理与数据安全管理

元数据管理能够对数据权限管理起到更好的辅助作用，通过线上流程化，实现以下功能：

- 岗位变动自动识别（打通HR系统），触发权限变更流程，如权限取消，权限交接，权限自动赋予等
- 目前绝大多数系统是操作RBAC模型进行设计的，主要根据功能权限设定审批人员，未加入数据权限来进行审核，故可以考虑功能权限+数据权限组合设定相关审批人，保证审批更合理性
- 根据技术元数据，定期对所有库表权限，系统账号权限和目录权限都可以进行扫描监控，对于异常风险提前识别
- 根据技术元数据和业务元数据，对敏感数据的导入导出进行风险识别
- 通过技术元数据与业务元数据可定期识别是否对敏感字段进行加密处理等